## Задание 2.1
### Тест кейсы

### Создание объявления (POST /api/1/item)

### TC-001: Успешное создание объявления 

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать валидные данные:
```json
{
  "sellerID": 555123,
  "name": "iPhone 14 Pro Max",
  "price": 90000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```
3. Установить заголовок `Content-Type: application/json`

**Ожидаемый результат:**
- Код ответа: `200 OK`
- Тело ответа содержит:
  - `id` - уникальный идентификатор пользователя, непустая строка
  - `sellerId` - `555123`
  - `name` - `"iPhone 15 Pro"`
  - `price` - `90000`
  - `statistics` - объект с полями `likes`, `viewCount`, `contacts`
  - `createdAt` - строка с датой создания в валидном формате
- Все поля соответствуют переданным данным

**Постусловия:** Создано новое объявление в системе

---

### TC-002: Создание объявления с минимальной ценой

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать данные с `price: 0`:
```json
{
  "sellerID": 555124,
  "name": "Бесплатный товар",
  "price": 0,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `200 OK` при условии, если бесплатные объявления разрешены
- Код ответа: `400 Bad Request` при условии, если должна быть минимальная цена, например 1 рубль
- При 400: тело ответа содержит описание ошибки валидации

**Постусловия:** Зависит от бизнес-логики, объявление будет принято или отклонено

---

### TC-003: Создание объявления с отрицательной ценой

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать данные с отрицательной ценой:
```json
{
  "sellerID": 555125,
  "name": "Тестовый товар",
  "price": -1000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит:
  - `status` - строка с описанием статуса
  - `result.message` - сообщение об ошибке валидации
  - `result.messages` - объект с детализацией ошибок

**Постусловия:** Объявление не создано

---

### TC-004: Создание объявления без обязательного поля sellerID

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать данные без поля `sellerID`:
```json
{
  "name": "Тестовый товар",
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об отсутствии обязательного поля
- В `result.messages` может быть указание на поле `sellerID`

**Постусловия:** Объявление не создано

---

### TC-005: Создание объявления без поля name

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать данные без поля `name`:
```json
{
  "sellerID": 555126,
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об отсутствии обязательного поля `name`

**Постусловия:** Объявление не создано

---

### TC-006: Создание объявления с пустым name

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать данные с пустой строкой в поле `name`:
```json
{
  "sellerID": 555127,
  "name": "",
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение о том, что поле `name` не может быть пустым

**Постусловия:** Объявление не создано

---

### TC-007: Создание объявления с длинным name

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Сгенерировать строку длиной 10000 символов
2. Отправить POST запрос на эндпоинт `/api/1/item`
3. В теле запроса передать данные с очень длинным `name`:
```json
{
  "sellerID": 555128,
  "name": "A...A" (10000 символов),
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request` - при существовании ограничения длины строки
- Код ответа: `200 OK` - если нет ограничения на длину строки
- При 400: сообщение об ошибке с указанием максимальной допустимой длины

**Постусловия:** Объявление создано или отклонено в зависимости от валидации

---

### TC-008: Создание объявления с невалидным типом данных для sellerID

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать строковое значение вместо числа в `sellerID`:
```json
{
  "sellerID": "sellerID2356",
  "name": "Тестовый товар",
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об ошибке типа данных для поля `sellerID`

**Постусловия:** Объявление не создано

---

### TC-009: Создание объявления с отрицательными значениями statistics

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать отрицательные значения в `statistics`:
```json
{
  "sellerID": 555129,
  "name": "Тестовый товар",
  "price": 5000,
  "statistics": {
    "likes": -5,
    "viewCount": -10,
    "contacts": -3
  }
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request` - при валидации на отрицательность значений полей
- Код ответа: `200 OK` - если нет валидации, но это неправильное поведение
- При 400: сообщение об ошибке валидации статистики

**Постусловия:** Ожидается, что объявление не создано

---

### TC-010: Создание объявления без поля statistics

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить POST запрос на эндпоинт `/api/1/item`
2. В теле запроса передать данные без поля `statistics`:
```json
{
  "sellerID": 555130,
  "name": "Тестовый товар",
  "price": 5000
}
```

**Ожидаемый результат:**
- Код ответа: `400 Bad Request` - при условии, что поле `statistics`
- Код ответа: `200 OK` с дефолтными значениями statistics
- При 200: в ответе `statistics` содержит `likes: 0`, `viewCount: 0`, `contacts: 0`

**Постусловия:** Объявление создано с дефолтными значениями или отклонено

---

## Получение объявления по ID (GET /api/1/item/:id)

### TC-011: Успешное получение существующего объявления

**Приоритет:** Высокий  
**Предусловия:** 
- Создано объявление с известным `id` (например, через TC-001)

**Шаги выполнения:**
1. Создать объявление и сохранить полученный `id`
2. Отправить GET запрос на эндпоинт `/api/1/item/{id}`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `200 OK`
- Тело ответа содержит массив с одним или несколькими элементами
- Объект содержит все поля:
  - `id` - соответствует запрошенному
  - `sellerId` - соответствует созданному
  - `name` - соответствует созданному
  - `price` - соответствует созданному
  - `statistics` - объект с полями `likes`, `viewCount`, `contacts`
  - `createdAt` - дата создания

**Постусловия:** Нет

---

### TC-012: Получение несуществующего объявления

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/item/nonexistent_id_12345`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `404 Not Found`
- Тело ответа содержит:
  - `status` - строка с описанием статуса
  - `result` - информация об ошибке

**Постусловия:** Нет

---

### TC-013: Получение объявления с пустым ID

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/item/`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `400 Bad Request` или `404 Not Found`
- Тело ответа содержит сообщение об ошибке

**Постусловия:** Нет

---

### TC-014: Получение объявления с невалидным форматом ID

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/item/@@invalid@@id@@`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об ошибке валидации ID

**Постусловия:** Нет

---

## Получение всех объявлений продавца (GET /api/1/:sellerID/item)

### TC-015: Успешное получение объявлений существующего продавца

**Приоритет:** Высокий  
**Предусловия:** 
- Создано несколько объявлений с одинаковым `sellerID` (например, 555200)

**Шаги выполнения:**
1. Создать 3 объявления с `sellerID: 555200`
2. Отправить GET запрос на эндпоинт `{{baseUrl}}/api/1/555200/item`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `200 OK`
- Тело ответа содержит массив объявлений
- Количество объявлений в массиве >= 3
- Все объекты в массиве имеют `sellerId: 555200`
- Каждый объект содержит все необходимые поля: `id`, `sellerId`, `name`, `price`, `statistics`, `createdAt`

**Постусловия:** Нет

---

### TC-016: Получение объявлений продавца без объявлений

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Выбрать уникальный `sellerID`, который гарантированно не использовался (например, 999888)
2. Отправить GET запрос на эндпоинт `/api/1/999888/item`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `200 OK` с пустым массивом `[]` 

**Постусловия:** Нет

---

### TC-017: Получение объявлений с отрицательным sellerID

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/-123/item`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об ошибке валидации `sellerID`

**Постусловия:** Нет

---

### TC-018: Получение объявлений с невалидным типом sellerID

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/abc/item`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об ошибке типа данных для `sellerID`

**Постусловия:** Нет

---

### TC-019: Проверка уникальности объявлений в списке продавца

**Приоритет:** Высокий  
**Предусловия:** 
- Создано 3 объявления с одинаковым `sellerID`

**Шаги выполнения:**
1. Создать 3 объявления с `sellerID: 555201`
2. Отправить GET запрос на эндпоинт `/api/1/555201/item`
3. Получить массив объявлений
4. Извлечь все значения поля `id` из массива
5. Проверить, что все `id` уникальны (нет дубликатов)

**Ожидаемый результат:**
- Код ответа: `200 OK`
- Все значения `id` в массиве различаются
- Количество уникальных `id` равно общему количеству объявлений

**Постусловия:** Нет

---

## Получение статистики по объявлению (GET /api/1/statistic/:id)

### TC-020: Успешное получение статистики существующего объявления

**Приоритет:** Высокий  
**Предусловия:** 
- Создано объявление с известным `id`

**Шаги выполнения:**
1. Создать объявление и сохранить полученный `id`
2. Отправить GET запрос на эндпоинт `/api/1/statistic/{id}`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `200 OK`
- Тело ответа содержит массив с объектом статистики
- Объект содержит поля:
  - `likes` - целое число
  - `viewCount` - целое число
  - `contacts` - целое число
- Значения соответствуют статистике созданного объявления

**Постусловия:** Нет

---

### TC-021: Получение статистики несуществующего объявления

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/statistic/nonexistent456`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `404 Not Found`
- Тело ответа содержит:
  - `status` - строка с описанием статуса
  - `result` - информация об ошибке

**Постусловия:** Нет

---

### TC-022: Получение статистики с пустым ID

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить GET запрос на эндпоинт `/api/1/statistic/`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `400 Bad Request` или `404 Not Found`
- Тело ответа содержит сообщение об ошибке

**Постусловия:** Нет

---

### TC-023: Сравнение статистики из разных эндпоинтов

**Приоритет:** Высокий  
**Предусловия:** 
- Создано объявление с известным `id`

**Шаги выполнения:**
1. Создать объявление с определенными значениями статистики
2. Сохранить полученный `id`
3. Отправить GET запрос на `/api/1/item/{id}` и сохранить `statistics` из ответа
4. Отправить GET запрос на `/api/1/statistic/{id}` и сохранить статистику
5. Сравнить значения `likes`, `viewCount`, `contacts` из обоих ответов

**Ожидаемый результат:**
- Оба запроса возвращают `200 OK`
- Значения `likes` из обоих эндпоинтов идентичны
- Значения `viewCount` из обоих эндпоинтов идентичны
- Значения `contacts` из обоих эндпоинтов идентичны

**Постусловия:** Нет

---

## Удаление объявления (DELETE /api/2/item/:id)

### TC-024: Успешное удаление существующего объявления

**Приоритет:** Высокий  
**Предусловия:** 
- Создано объявление с известным `id`

**Шаги выполнения:**
1. Создать объявление и сохранить полученный `id`
2. Отправить DELETE запрос на эндпоинт `/api/2/item/{id}`
3. Установить заголовок `Accept: application/json`
4. Попытаться получить удаленное объявление через GET `/api/1/item/{id}`

**Ожидаемый результат:**
- DELETE запрос возвращает код: `200 OK`
- Последующий GET запрос возвращает код: `404 Not Found`
- Объявление больше не доступно в системе

**Постусловия:** Объявление удалено из системы

---

### TC-025: Удаление несуществующего объявления

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить DELETE запрос на эндпоинт `/api/2/item/nonexistent789`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `404 Not Found`
- Тело ответа содержит:
  - `status` - строка с описанием статуса
  - `result` - информация об ошибке

**Постусловия:** Нет изменений в системе

---

### TC-026: Повторное удаление уже удаленного объявления

**Приоритет:** Средний  
**Предусловия:** 
- Объявление было создано и затем удалено

**Шаги выполнения:**
1. Создать объявление и сохранить `id`
2. Удалить объявление через DELETE запрос
3. Повторно отправить DELETE запрос на тот же `/api/2/item/{id}`

**Ожидаемый результат:**
- Первый DELETE возвращает: `200 OK`
- Второй DELETE возвращает: `404 Not Found`
- Сообщение об ошибке указывает, что объявление не найдено

**Постусловия:** Объявление остается удаленным

---

### TC-027: Удаление объявления с пустым ID

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**
1. Отправить DELETE запрос на эндпоинт `/api/2/item/`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `404 Not Found`
- Тело ответа содержит сообщение об ошибке

**Постусловия:** Нет изменений в системе

---

## Получение статистики v2 (GET /api/2/statistic/:id)

### TC-028: Получение статистики через API v2

**Приоритет:** Средний  
**Предусловия:** 
- Создано объявление с известным `id`

**Шаги выполнения:**
1. Создать объявление и сохранить `id`
2. Отправить GET запрос на эндпоинт `/api/2/statistic/{id}`
3. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**
- Код ответа: `200 OK` или `100 Continue`
- Тело ответа содержит массив с объектом статистики
- Объект содержит поля: `likes`, `viewCount`, `contacts`

**Постусловия:** Нет

---

### TC-029: Сравнение статистики между v1 и v2

**Приоритет:** Средний  
**Предусловия:** 
- Создано объявление с известным `id`

**Шаги выполнения:**
1. Создать объявление с определенными значениями статистики
2. Сохранить `id`
3. Получить статистику через `/api/1/statistic/{id}`
4. Получить статистику через `/api/2/statistic/{id}`
5. Сравнить структуру и значения из обоих ответов

**Ожидаемый результат:**
- Оба запроса успешны
- Данные статистики (`likes`, `viewCount`, `contacts`) идентичны
- Структура ответа может различаться, но данные совпадают

**Постусловия:** Нет

---

## Интеграционные и сквозные тесты

### TC-030: Полный жизненный цикл объявления

**Приоритет:** Критический  
**Предусловия:** Нет

**Шаги выполнения:**
1. Создать объявление через POST `/api/1/item` с данными:
```json
{
  "sellerID": 555300,
  "name": "Apple AirPods 3",
  "price": 15000,
  "statistics": {
    "likes": 5,
    "viewCount": 100,
    "contacts": 3
  }
}
```
2. Сохранить полученный `id` из ответа
3. Получить объявление по ID через GET `/api/1/item/{id}`
4. Получить список объявлений продавца через GET `/api/1/555300/item`
5. Получить статистику объявления через GET `/api/1/statistic/{id}`
6. Удалить объявление через DELETE `/api/2/item/{id}`
7. Попытаться получить удаленное объявление через GET `/api/1/item/{id}`

**Ожидаемый результат:**
- Шаг 1: Код ответа `200`, объявление создано с корректными данными
- Шаг 3: Код ответа `200`, данные объявления совпадают с созданными
- Шаг 4: Код ответа `200`, в списке присутствует созданное объявление
- Шаг 5: Код ответа `200`, статистика совпадает с указанной при создании
- Шаг 6: Код ответа `200`, объявление успешно удалено
- Шаг 7: Код ответа `404`, объявление больше не существует

**Постусловия:** Объявление удалено из системы

---

### TC-031: Создание нескольких объявлений одним продавцом

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать 5 объявлений с одинаковым `sellerID: 555301` через POST запросы:
    - Объявление 1: `name: "Товар 1"`, `price: 1000`
    - Объявление 2: `name: "Товар 2"`, `price: 2000`
    - Объявление 3: `name: "Товар 3"`, `price: 3000`
    - Объявление 4: `name: "Товар 4"`, `price: 4000`
    - Объявление 5: `name: "Товар 5"`, `price: 5000`
2. Сохранить все полученные `id`
3. Получить список объявлений продавца через GET `/api/1/555301/item`
4. Подсчитать количество объявлений в ответе

**Ожидаемый результат:**

- Все POST запросы возвращают код `200`
- GET запрос возвращает код `200`
- В массиве ответа содержится минимум 5 объявлений
- Все объявления имеют `sellerId: 555301`
- Все созданные объявления присутствуют в списке

**Постусловия:** В системе существует 5 объявлений продавца 555301

---

### TC-032: Изоляция данных разных продавцов

**Приоритет:** Критический  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать 2 объявления с `sellerID: 555302`:
    - `name: "Продавец 1 - Товар 1"`, `price: 1000`
    - `name: "Продавец 1 - Товар 2"`, `price: 2000`
2. Создать 2 объявления с `sellerID: 555303`:
    - `name: "Продавец 2 - Товар 1"`, `price: 3000`
    - `name: "Продавец 2 - Товар 2"`, `price: 4000`
3. Получить список объявлений для `sellerID: 555302` через GET `/api/1/555302/item`
4. Получить список объявлений для `sellerID: 555303` через GET `/api/1/555303/item`
5. Проверить, что в каждом списке только объявления соответствующего продавца

**Ожидаемый результат:**

- Все POST запросы возвращают код `200`
- Список для продавца 555302 содержит только 2 объявления с `sellerId: 555302`
- Список для продавца 555303 содержит только 2 объявления с `sellerId: 555303`
- Нет пересечений между списками
- Объявления одного продавца не появляются в списке другого

**Постусловия:** Данные продавцов изолированы

---

### TC-033: Уникальность ID объявлений

**Приоритет:** Критический  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать 10 объявлений с одинаковыми или разными `sellerID`
2. Сохранить все полученные `id` в список
3. Проверить уникальность всех `id` в списке
4. Убедиться, что нет повторяющихся значений

**Ожидаемый результат:**

- Все POST запросы возвращают код `200`
- Все 10 значений `id` уникальны
- Нет дубликатов в списке `id`
- Количество уникальных `id` равно 10

**Постусловия:** В системе создано 10 объявлений с уникальными ID

---

## 8. Негативные тесты

### TC-034: Отправка невалидного JSON

**Приоритет:** Высокий  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить POST запрос на `/api/1/item`
2. В теле запроса передать невалидный JSON:

```
{
  "sellerID": 555400,
  "name": "Тест"
  "price": 5000
}
```

3. Установить заголовок `Content-Type: application/json`

**Ожидаемый результат:**

- Код ответа: `400 Bad Request`
- Тело ответа содержит сообщение об ошибке парсинга JSON

**Постусловия:** Объявление не создано

---

### TC-035: Отправка запроса без Content-Type

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить POST запрос на `/api/1/item`
2. В теле запроса передать валидный JSON
3. НЕ устанавливать заголовок `Content-Type`

**Ожидаемый результат:**

- Код ответа: `400 Bad Request` или `415 Unsupported Media Type`
- Сообщение об ошибке указывает на отсутствие или некорректный Content-Type

**Постусловия:** Объявление не создано

---

### TC-036: Отправка запроса с некорректным методом

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить PUT запрос на `/api/1/item` (вместо POST)
2. В теле передать валидные данные объявления

**Ожидаемый результат:**

- Код ответа: `405 Method Not Allowed`
- Заголовок `Allow` содержит список разрешенных методов (должен включать POST)

**Постусловия:** Объявление не создано

---

### TC-037: Создание множества объявлений

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. В цикле создать 100 объявлений последовательно для одного продавца `sellerID: 555401`
2. Для каждого объявления использовать уникальное имя: `name: "Товар {номер}"`
3. После создания всех объявлений получить список через GET `/api/1/555401/item`
4. Подсчитать количество объявлений в ответе

**Ожидаемый результат:**

- Все 100 POST запросов возвращают код `200`
- Нет ошибок 500 или таймаутов
- GET запрос успешно возвращает список
- В списке присутствует минимум 100 объявлений
- Все объявления имеют корректные данные

**Постусловия:** В системе создано 100 объявлений

---

### TC-038: SQL Injection в параметрах

**Приоритет:** Критический  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить GET запрос на `/api/1/item/' OR '1'='1`
2. Установить заголовок `Accept: application/json`

**Ожидаемый результат:**

- Код ответа: `400 Bad Request` или `404 Not Found`
- SQL инъекция НЕ выполняется
- Сообщение об ошибке валидации ID
- Не возвращаются данные всех объявлений

**Постусловия:** Система защищена от SQL инъекций

---

### TC-039: XSS в поле name

**Приоритет:** Критический  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить POST запрос на `/api/1/item` с телом:

```json
{
  "sellerID": 555402,
  "name": "<script>alert('XSS')</script>",
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

2. Если объявление создано, получить его через GET запрос
3. Проверить содержимое поля `name` в ответе

**Ожидаемый результат:**

- Код ответа: `400`, создание отклонено из-за содержания небезопасного контента
	ИЛИ
- Код ответа: `200`, но при получении поле `name` содержит экранированные символы: `&lt;script&gt;alert('XSS')&lt;/script&gt;`
- Скрипт НЕ выполняется в браузере при отображении

**Постусловия:** Система защищена от XSS атак

---

### TC-040: Проверка заголовков безопасности

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить любой валидный GET запрос (например, получение объявления)
2. Проверить наличие следующих заголовков в ответе:
    - `X-Content-Type-Options: nosniff`
    - `X-Frame-Options: DENY` или `SAMEORIGIN`
    - `X-XSS-Protection: 1; mode=block`
    - `Strict-Transport-Security` (если используется HTTPS)

**Ожидаемый результат:**

- Присутствуют основные заголовки безопасности
- Значения заголовков установлены корректно
- `X-Content-Type-Options` предотвращает MIME-sniffing
- `X-Frame-Options` защищает от clickjacking

**Постусловия:** Нет

---

## Граничные значения

### TC-041: Максимальная длина названия объявления

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Протестировать создание объявлений с различной длиной `name`:
    - 100 символов
    - 500 символов
    - 1000 символов
    - 5000 символов
    - 10000 символов
2. Для каждой длины отправить POST запрос
3. Зафиксировать, при какой длине начинаются ошибки

**Ожидаемый результат:**

- Определено максимальное допустимое значение длины `name`
- Код ответа `400`: при превышении лимита
- Сообщение об ошибке указывает максимальную длину
- Код ответа `200` до достижения лимита, объявления создаются успешно

**Постусловия:** Определены границы валидации

---

### TC-042: Максимальное значение price

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявление с максимальным значением integer (2147483647):

```json
{
  "sellerID": 555403,
  "name": "Товар с максимальной ценой",
  "price": 2147483647,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

2. Попытаться создать объявление с ценой больше максимального integer

**Ожидаемый результат:**

- С максимальным integer: код ответа `200`, объявление создано
- Код ответа `400`: превышение с сообщением об ошибке переполнения
- Данные корректно сохраняются и возвращаются

**Постусловия:** Определены границы для поля price

---

### TC-043: Минимальный и максимальный sellerID в допустимом диапазоне

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявление с минимальным рекомендованным `sellerID: 111111`:

```json
{
  "sellerID": 111111,
  "name": "Минимальный ID",
  "price": 1000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

2. Создать объявление с максимальным рекомендованным `sellerID: 999999`:

```json
{
  "sellerID": 999999,
  "name": "Максимальный ID",
  "price": 1000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

3. Получить оба объявления

**Ожидаемый результат:**

- Оба POST запроса возвращают код `200`
- Объявления успешно создаются
- Значения `sellerID` корректно сохраняются
- Объявления доступны через GET запросы

**Постусловия:** Проверены граничные значения диапазона

---

### TC-044: sellerID за пределами рекомендованного диапазона

**Приоритет:** Низкий  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявление с `sellerID: 100000` (ниже минимального)
2. Создать объявление с `sellerID: 1000000` (выше максимального)

**Ожидаемый результат:**

- Система либо принимает значения (код `200`), либо отклоняет (код `400`)
- Если принимает - объявления создаются корректно
- Если отклоняет - сообщение об ошибке указывает на допустимый диапазон

**Постусловия:** Определено поведение системы за границами диапазона

---

### TC-045: Нулевые значения в statistics

**Приоритет:** Низкий  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявление со всеми нулевыми значениями статистики:

```json
{
  "sellerID": 555404,
  "name": "Объявление с нулевой статистикой",
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

2. Получить созданное объявление
3. Получить статистику объявления

**Ожидаемый результат:**

- Код ответа: `200`
- Объявление создается успешно
- Все значения статистики равны 0
- Статистика корректно возвращается через все эндпоинты

**Постусловия:** Объявление создано с нулевой статистикой

---

### TC-046: Максимальные значения в statistics

**Приоритет:** Низкий  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявление с максимальными значениями статистики:

```json
{
  "sellerID": 555405,
  "name": "Объявление с максимальной статистикой",
  "price": 5000,
  "statistics": {
    "likes": 2147483647,
    "viewCount": 2147483647,
    "contacts": 2147483647
  }
}
```

**Ожидаемый результат:**

- Код ответа: `200` (если нет ограничений) или `400` (если есть)
- При `200`: значения корректно сохраняются
- При `400`: сообщение указывает на максимальные допустимые значения

**Постусловия:** Определены границы для полей статистики

---

## Производительность и надежность

### TC-047: Время ответа API при создании объявления

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Отправить POST запрос на создание объявления
2. Измерить время от отправки запроса до получения ответа
3. Повторить 10 раз
4. Вычислить среднее время ответа

**Ожидаемый результат:**

- Среднее время ответа < 2 секунд
- 95% запросов выполняются за < 3 секунд
- Нет таймаутов

**Постусловия:** Получены метрики производительности

---

### TC-048: Время ответа при получении списка объявлений

**Приоритет:** Средний  
**Предусловия:**

- У продавца существует минимум 50 объявлений

**Шаги выполнения:**

1. Создать 50+ объявлений для одного продавца (если еще не созданы)
2. Отправить GET запрос на получение всех объявлений продавца
3. Измерить время ответа
4. Повторить 10 раз
5. Вычислить среднее время

**Ожидаемый результат:**

- Среднее время ответа < 3 секунд
- Все объявления возвращаются в одном ответе
- Нет разбивки на страницы (если не предусмотрено)
- Нет таймаутов

**Постусловия:** Получены метрики производительности

---

### TC-049: Обработка 500 ошибок

**Приоритет:** Высокий  
**Предусловия:**

- Необходимо спровоцировать серверную ошибку (например, через некорректные данные или большую нагрузку)

**Шаги выполнения:**

1. Попытаться спровоцировать ошибку 500 (различными способами)
2. При получении ошибки 500 проверить структуру ответа
3. Проверить наличие всех обязательных полей

**Ожидаемый результат:**

- Код ответа: `500 Internal Server Error`
- Тело ответа содержит:
    - `status` - строка с описанием статуса
    - `result` - объект с полями:
        - `message` - общее сообщение об ошибке
        - `messages` - объект с детализацией (может быть пустым)
- Структура соответствует документации
- Нет раскрытия чувствительной информации (стеки ошибок, пути к файлам)

**Постусловия:** Проверена обработка серверных ошибок

---

### TC-050: Параллельное создание объявлений

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Одновременно (параллельно) отправить 10 POST запросов на создание объявлений с одинаковым `sellerID`
2. Дождаться завершения всех запросов
3. Проверить статус каждого ответа
4. Собрать все полученные `id`
5. Получить список объявлений продавца

**Ожидаемый результат:**

- Все 10 запросов возвращают код `200`
- Все 10 объявлений успешно созданы
- Все `id` уникальны
- Нет race conditions или дубликатов
- В списке продавца присутствуют все 10 объявлений

**Постусловия:** Система корректно обрабатывает параллельные запросы

---

### TC-051: Согласованность данных после удаления

**Приоритет:** Высокий  
**Предусловия:**

- Создано объявление

**Шаги выполнения:**

1. Создать объявление с `sellerID: 555500`
2. Сохранить `id`
3. Получить список объявлений продавца и подсчитать количество
4. Удалить созданное объявление
5. Снова получить список объявлений продавца
6. Подсчитать количество и сравнить
7. Попытаться получить статистику удаленного объявления

**Ожидаемый результат:**

- Объявление успешно удаляется
- Количество объявлений в списке продавца уменьшается на 1
- Удаленное объявление отсутствует в списке продавца
- GET запрос на удаленное объявление возвращает `404`
- GET запрос на статистику удаленного объявления возвращает `404`
- Данные согласованы во всех эндпоинтах

**Постусловия:** Подтверждена согласованность данных

---

### TC-052: Идемпотентность GET запросов

**Приоритет:** Средний  
**Предусловия:**

- Создано объявление

**Шаги выполнения:**

1. Создать объявление
2. Выполнить GET запрос на получение объявления
3. Сохранить ответ
4. Повторить GET запрос 5 раз
5. Сравнить все ответы

**Ожидаемый результат:**

- Все GET запросы возвращают код `200`
- Все ответы идентичны
- Данные объявления не изменяются от повторных GET запросов
- GET запросы не имеют побочных эффектов

**Постусловия:** Подтверждена идемпотентность

---

### TC-053: Корректность кодировки символов

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявление с названием на разных языках и спецсимволами:

```json
{
  "sellerID": 555501,
  "name": "Тест кириллицы 测试中文 🚀 émojis & спецсимволы: €£¥",
  "price": 5000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

2. Получить созданное объявление
3. Сравнить поле `name` с исходным

**Ожидаемый результат:**

- Код ответа: `200`
- Объявление создается успешно
- Все символы (кириллица, китайские, эмодзи, спецсимволы) корректно сохраняются
- При получении поле `name` идентично отправленному
- Кодировка UTF-8 обрабатывается корректно

**Постусловия:** Подтверждена поддержка Unicode

---

### TC-054: Обработка специальных символов в name

**Приоритет:** Средний  
**Предусловия:** Нет

**Шаги выполнения:**

1. Создать объявления с различными спецсимволами в `name`:
    - Кавычки: `"Товар с "кавычками""`
    - Слеши: `"Товар/со\\слешами"`
    - Переносы строк: `"Товар\nс\nпереносами"`
    - Табуляция: `"Товар\tс\tтабуляцией"`
2. Получить каждое объявление
3. Проверить корректность сохранения

**Ожидаемый результат:**

- Объявления создаются успешно или отклоняются с понятным сообщением
- Если создаются: спецсимволы корректно экранируются/сохраняются
- Нет проблем с парсингом JSON
- Данные не повреждаются

**Постусловия:** Определена обработка спецсимволов

---